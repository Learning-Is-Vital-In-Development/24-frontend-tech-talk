> https://hackmd.io/@HxbIB68BRqGizoJBtQEV7w/H1bt1f-j6

# 7주차 (2/13) - Back/foward cache

## 개념

- 브라우저에 캐싱된 페이지를 복원하는 기법
- 페이지를 완전 메모리에 저장해두고 전체를 가져오는 방식
- 자바스크립트가 실행되던 상태가 그대로 복원
  - 할당된 변수 등등
- 캐싱 기법 중 가장 빠르다.
- 타이머는 캐시에 들어가면 멈추고 복원이되면 다시 실행된다
- spa - navigation과는 같이 사용불가
- 리소스 다운로드없이 페이지 복원 (이미지같은것도 캐싱됨)

## 적용

- 적용방식이 따로 있는게 아님...!
- 브라우저가 알아서 관리하는듯

## API

- page transition event

  - pageshow
    - event.persisted
  - pagehide

- PageLifecycle.js
  - 크로스 브라우징 처리

## 최적화

### 아래의 규칙을 지키면 브라우저가 캐싱함

- unload 이벤트 사용하면 안됨
- beforeunload 이벤트 핸들러는 필요할 때만 사용
- cache-control: no-store 사용하면 캐싱 X
- window.opener reference 사용하지 X
  - 팝업 부모 페이지: window.opener로 참조
- 열려있는 연결 끊기

  - 다른 페이지와 통신할 수 있는 api들
  - Indexed Db, 웹 소켓, webRTC, fetch 등

- 디버깅방식

  - browser > Application > Back-forward Cache
  - LightHouse - Performance

- [NotRestoredReasons API](https://developer.chrome.com/docs/web-platform/bfcache-notrestoredreasons?hl=ko)
  - 브라우저 캐시가 안되는 이유를 알려줌

## 질문

1. 리액트의 마운트/언마운트와는 상관없이 동작하는건가?
   - spa - navigation과는 같이 사용불가
2. 몇개까지 저장하는가?
3. BFCache vs HTTP Cache
   - http cache: 네트워크 캐시
   - bfcache : 브라우저에 그려진 화면 자체를 캐시
4. history back이랑 같이 동작한다.
5. Next.js에서 기본적으로 동작하는지?
   - 정적사이트(SSG)에서는 동작할거같음
   - Nuxt ssg에서 동작함

# Chrome 122

- [Iterator helpers](https://tc39.es/proposal-iterator-helpers/)
  - iterator 편하게 쓸 수 있게 해주는 메서드들
  - map, filter, take, drop, flatMap, reduce, toArrary, every, forEach 등등... iterator 메서드 추가
  - 함수형 프로그래밍할 때 사용
- Set 메서드 추가
  - intersection
  - union
  - difference
  - isSubsetOf
  - 등등
