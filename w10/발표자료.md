# SVG

- [svg playground](https://jsfiddle.net/AlexanderKozhevin/uve10Lhy/)

# SVG란

- **깨지지 않고**, **용량이 적고**, **출력이 빠르며**, **수정과 애니메이션이 가능**
- 2차원 벡터 그래픽을 서술하는 XML 기반의 마크업 언어
- 그림을 그리는 명령
- SVG태그 내부에 담을 수 있는 것은 원, 사각형, 다각형, 라인,  path 등이 있음

```tsx
<svg width="가로영역" height="세로영역">
	SVG그래픽
    ...
</svg>
```

## 사용하는 이유

- 웹사이트 로딩 속도가 빠르다. SVG는 XML코드이기 때문에 파일의 크기가 작다.
- 어떤 크기에서든 재활용이 가능. SVG는 크기에 따라 이미지가 왜곡되거나 품질이 떨어져 보이지 않는다.
- CSS로 디자인 수정이 가능하다.

## 단점

- 너무 복잡한 SVG는 비효율적일 수 있다.
- 많은 모양, 색상, 그라디언트를 포함하여서 파일 크기가 JPG나 PNG 보다 커지는 경우가 종종 있기 때문에 단점이 될 수 있긴함

# SVG의 기본속성

```tsx
<svg height="100" width="100" viewBox="0 0 50 50">
 <circle cx="20" cy="20" r="20"  fill="red" />
</svg>
```

- width, height : viewport 사이즈
- viewbox : **SVG 내부 요소들의 좌표 영역과 비율**, 그리고 **뷰포트 내에서 도형을 보여줄 위치**를 설정할 수 있다.
    - **`viewBox`** 속성은 **`min-x`**, **`min-y`**, **`width`**, **`height`**를 순서대로 받는다.
    - **`min-x`**, **`min-y`**: 왼쪽 위를 기준점으로 한 뷰박스의 좌표
    - **`width`**, **`height`**: 가로, 세로 뷰박스 사이즈
    
  
# 하위 태그

## path

- <path /> 태그는 일러스트레이터처럼 패스(선과 면)을 이용한 태그
- 속성 중 `d`라는 속성에 다양한 패스 데이터를 사용할 수 있습니다.

| 데이터 종류 | 설명 |
| --- | --- |
| M(move to) | 이동좌표 |
| L | 선 |
| H | 수평선 |
| V | 수직선 |
| C | 곡선 |
| S | 부드러운 곡선 |
| Q | 2차 베지어 곡선 |
| T | 부드러운 2차 베지어 곡선 |
| A | 타원형 호 |
| Z | 가까운 경로, 첫 점으로 연결 |
- 삼각형
    
    ```tsx
    <svg width="400" height="210" >
    	<path d="M150 0 L75 200 L225 200 Z" />
    </svg>
    ```
    
- 곡선
    - 베지어 곡선은 무제한으로 크기를 조정할 수 있는 부드러운 곡선을 모델링하는데 사용됩니다.
    - 일반적으로는 `두개의 끝점`과 하나 또는 두개의 `제어점`을 선택합니다.

        
    - 하나의 제어 지점을 갖는 베지어 곡선을 이차 베지어 곡선이라고 합니다.
    - 두개의 제어 지점을 갖는 베지어 곡선을 큐빅 베지어 곡선(입방향 3차원 곡선)이라고 합니다.
    
    ```tsx
    <svg width="400" height="400" >
    	<path d="M 20 350 q 150 -300 300 0" stroke="blue" stroke-width="5" fill="none" />
    </svg>
    ```
    

## text

- 텍스트를 벡터 방식으로 작성

```tsx
<text x="0" y="15" fill="red">I love OSSAM!</text>
	<text x="10" y="20" style="fill:red;">Several lines:
	<tspan x="10" y="45">First line.</tspan>
	<tspan x="10" y="70">Second line.</tspan>
</text>
```

- textPath
    - [참고](https://css-tricks.com/snippets/svg/curved-text-along-path/)
    
    ```tsx
    <svg height="1000" width="1000">
      <path id="curve" fill="red" d="M73.2,148.6c4-6.1,65.5-96.8,178.6-95.6c111.3,1.2,170.8,90.3,175.1,97" />
      <text width="500">
        <textPath xlink:href="#curve">
            가나다라마바사아자차카타파하
        </textPath>
      </text>
    </svg>
    
    <path
        id="curve"
        fill="none"
        stroke="red"
        d="M10,90 Q90,90 90,45 Q90,10 50,10 Q10,10 10,40 Q10,70 45,70 Q70,70 75,50" />
    ```
    
    ```css
    body {
      background-color: #333;
      font-family:  cursive;
      font-size: 35px;
    }
    
    path {
      fill: transparent;
    }
    
    text {
      fill: #FF9800;
    }
    ```
    

## circle

- circle
    
    ```tsx
    <circle cx="100" cy="100" r="50" style="fill:lime;stroke:purple;stroke-width:3" /> 
    ```
    
- ellipse
    
    ```tsx
    <ellipse cx="200" cy="100" rx="100" ry="50" style="fill:#dddddd;stroke:purple;stroke-width:3" />
    ```
    

## [SVG 그룹화](https://a11y.gitbook.io/graphics-aria/svg-graphics/svg-container-elements#less-than-symbol-greater-than)

## group

```tsx
<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
  <!-- Using g to inherit presentation attributes -->
  <g fill="white" stroke="green" stroke-width="5">
    <circle cx="40" cy="40" r="25" />
    <circle cx="60" cy="60" r="25" />
  </g>
</svg>
```

## use

```tsx
<svg viewBox="0 0 30 10" xmlns="http://www.w3.org/2000/svg">
  <circle id="myCircle" cx="5" cy="5" r="4" stroke="blue" />
  <use href="#myCircle" x="10" fill="blue" />
  <use href="#myCircle" x="20" fill="white" stroke="red" />
</svg>
```

## SVG sprite

- 💜[1타강사 블로그](https://velog.io/@sasha1107/SVG-%EC%8A%A4%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8A%B8-%EA%B8%B0%EB%B2%95%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%84%B1%EB%8A%A5-%ED%96%A5%EC%83%81%EC%8B%9C%ED%82%A4%EA%B8%B0%EB%A6%AC%EC%95%A1%ED%8A%B8%EC%97%90%EC%84%9C-%EC%8A%A4%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8A%B8-SVG-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)💜

```jsx
<svg xmlns="http://www.w3.org/2000/svg">
    <symbol id="cloud-svgrepo-com" viewBox="0 0 24 24">
        <path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 13.65C3 16.603 5.418 19 8.4 19h8.1c2.485 0 4.5-2.016 4.5-4.503 0-1.847-1.11-3.552-2.7-4.247C18.132 7.323 15.684 5 12.69 5 10.35 5 8.346 6.486 7.5 8.5 4.8 8.938 3 11.2 3 13.65z"/>
    </symbol>
    <symbol id="cloud-moon-svgrepo-com" viewBox="0 0 24 24">
        <path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 15.502A6.502 6.502 0 0 1 21 3.5a6.502 6.502 0 0 0-8.5 3.496M6.9 21C4.746 21 3 19.289 3 17.178c0-1.75 1.3-3.366 3.25-3.678.612-1.438 2.06-2.5 3.748-2.5 2.163 0 3.93 1.659 4.052 3.75 1.148.496 1.95 1.715 1.95 3.034C16 19.56 14.545 21 12.75 21H6.9z"/>
    </symbol>
    <symbol id="cloud-fog-svgrepo-com" viewBox="0 0 24 24">
        <path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 18h4m3 0h11M5 21h7m4 0h3M8.8 15C6.149 15 4 12.947 4 10.414 4 8.314 5.6 6.375 8 6a5.057 5.057 0 0 1 4.613-3c2.662 0 4.837 1.99 4.987 4.5 1.413.596 2.4 2.057 2.4 3.64 0 2.132-1.79 3.86-4 3.86H8.8z"/></symbol><symbol id="circle-heat-svgrepo-com" viewBox="0 0 24 24"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12h10M8 8.5S9 9 10 9c1.5 0 2.5-1 4-1 1 0 2 .5 2 .5m-8 7s1 .5 2 .5c1.5 0 2.5-1 4-1 1 0 2 .5 2 .5m5-3.5a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/>
    </symbol>
</svg>
```

```jsx
import SpriteSVG from "../svg_sprite.svg"

const TestSVG = ({id, color, size=24}) => (
    <svg fill={color} width={size} height={size}>
        <use href={`${SpriteSVG}#${id}`} />
    </svg>
)

<TestSVG id="cloud-moon-svgrepo-com" size=20/>
```

# d3에서 사용방법

[react playground](https://playcode.io/react)

```jsx
import { select } from "d3";
import { useEffect,  useState } from "react";
import d3 from 'd3';

const TestChart = () => {
  const [svgRef, setSvgRef] = useState(null);

  useEffect(() => {
    if (!svgRef) return;
    const svg = select(svgRef).attr("width", 500).attr("height", 500).attr("viewBox", [0, 0, 500, 500]);
      svg
        .append("path")
        .attr("fill", "red")
        .attr("stroke", "blue")
        .attr("stroke-width", 2)
        .attr("stroke-linejoin", "round")
        .attr("d", "M 20 350 q 150 -300 300 0");
    return () => {
      setSvgRef(null);
      select(svgRef).selectAll("svg *").remove();
      select(svgRef).attr("width", 0).attr("height", 0).attr("viewBox", [0, 0, 0, 0]);
    };
  }, [svgRef]);

  return (
   <div style={{width:"500px", height:"500px", background:'green'}}>
      <svg ref={(ref) => ref && setSvgRef(ref)} width={0} height={0} />
   </div>
  );
};

export default TestChart;
```

- [d3-scale](https://d3js.org/d3-scale)
- d3-array
    - [ticks](https://d3js.org/d3-array/ticks)
    - [sets](https://d3js.org/d3-array/sets) - union, intersection

## 응용 사이트

- [https://observablehq.com/@d3/gallery?utm_source=d3js-org&utm_medium=nav&utm_campaign=try-observable](https://observablehq.com/@d3/gallery?utm_source=d3js-org&utm_medium=nav&utm_campaign=try-observable)
- [https://d3-graph-gallery.com/index.html](https://d3-graph-gallery.com/index.html)

# 하지만…SVG in JS는 naver..

**[2023년 SVG-in-JS와 결별](https://github.com/yeonjuan/dev-blog/blob/master/JavaScript/breaking-up-with-svg-in-js-in-2023.md)**

# 질문

- SVG 관리 어떻게 하시는지
- 차트 라이브러리 뭐쓰시는지
